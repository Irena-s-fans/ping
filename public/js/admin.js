(()=>{var e,t={6018:()=>{$(document).ready((function(){$(".form__checkbox-label").each((function(){$(this).closest(".form__block").find('input[type="checkbox"]').is(":checked")?$(this).addClass("form__checkbox-label_active"):$(this).removeClass("form__checkbox-label_active")})),$("form").validate({rules:{title:{required:!0},description:{required:!0},text:{required:!0}},messages:{title:{required:"Заполните данное поле"},description:{required:"Заполните данное поле"},text:{required:"Заполните данное поле"}}}),$(".edit__btn").on("click",(function(e){e.preventDefault();var t=$(this).closest("form");if(t.valid()){var n=new FormData(t.get(0));n.set("text",tinymce.get("text").getContent({format:"Document"})),n.set("lang",t.find('input[name="lang"]').is(":checked")?"on":"off"),n.set("linkExternal",t.find('input[name="linkExternal"]').is(":checked")?"on":"off"),$.ajax({type:"POST",url:t.attr("data-url"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:n,cache:!1,contentType:!1,processData:!1,success:function(e){alert(JSON.parse(e).msg)},error:function(){alert("Ошибка при отправке формы.")}})}})),$(".add__btn").on("click",(function(e){e.preventDefault();var t=$(this).closest("form");if(t.valid()){var n=new FormData(t.get(0));n.set("text",tinymce.get("text").getContent({format:"Document"})),n.set("lang",t.find('input[name="lang"]').is(":checked")?"on":"off"),n.set("linkExternal",t.find('input[name="linkExternal"]').is(":checked")?"on":"off"),$.ajax({type:"POST",url:t.attr("data-url"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:n,cache:!1,contentType:!1,processData:!1,success:function(e){alert(JSON.parse(e).msg)},error:function(){alert("Ошибка при отправке формы.")}})}})),$(".login__btn").on("click",(function(e){e.preventDefault();var t=$(this).closest("form");if(t.valid()){var n=new FormData(t.get(0));$.ajax({type:"POST",url:t.attr("data-url"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:n,cache:!1,contentType:!1,processData:!1,success:function(){void 0===t.attr("redirect-on-submit")?alert("Форма была отправлена."):window.location.href="/home"},error:function(){alert("Ошибка при отправке формы.")}})}})),$(".form__field_file").on("change",(function(){var e=$(this).closest(".form__block");if(e.find(".form__field_label").html(this.files.length?this.files[0].name:"Выберите файл"),e.find(".form__media.active").removeClass("active"),this.files[0].type.startsWith("video")){var t=e.find(".form-video");t.attr("src",window.URL.createObjectURL(this.files[0])),t.on("loadeddata",(function(){window.URL.revokeObjectURL(t.attr("src")),t.addClass("active")}))}else if(this.files[0].type.startsWith("image")){var n=e.find(".form-img");n.attr("src",window.URL.createObjectURL(this.files[0])),n.on("load",(function(){window.URL.revokeObjectURL(n.attr("src")),n.addClass("active")}))}else alert("Формат файла не поддерживается. Текущий формат файла: ".concat(this.files[0].type))})),$(".form__checkbox-label").on("click",(function(){$(this).toggleClass("form__checkbox-label_active")}))}))},5760:()=>{$(document).ready((function(){$(".logout").on("click",(function(e){e.preventDefault(),$.ajax({type:"POST",url:"/logout",datatype:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(){window.location.href="/home"},error:function(e){alert("Произошла ошибка: ".concat(e))}})}))}))},7831:()=>{$(document).ready((function(){$(".project-delete").on("click",(function(e){e.preventDefault();var t=Number($(this).attr("data-project-id"));$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/admin/projects/delete",method:"POST",dataType:"json",data:{projectID:t},success:function(){location.reload()},error:function(){alert("Произошла ошибка при удалении записи.")}})}))}))},5608:(e,t,n)=>{var a={"./_form.js":6018,"./_logout.js":5760,"./_project-edit.js":7831};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=5608}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(e=a(5608)).keys().forEach((function(t){return e(t)}))})();
(()=>{var e,t={4313:(e,t,a)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===n(i)?i:String(i)),o)}var r,i}a.r(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,n;return t=e,n=[{key:"show",value:function(e){var t=$(e);return $("body").css("overflow-y","hidden"),t.fadeIn(250),t.addClass("popup__active"),this}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".popup__active",t=$(e);return $("body").css("overflow-y","auto"),t.fadeOut(125),t.removeClass("popup__active"),this}}],(a=null)&&o(t.prototype,a),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();$(document).ready((function(){$(".form__checkbox-label").each((function(){$(this).closest(".form__block").find('input[type="checkbox"]').is(":checked")?$(this).addClass("form__checkbox-label_active"):$(this).removeClass("form__checkbox-label_active")})),$("form").validate({rules:{title:{required:!0},description:{required:!0},text:{required:!0}},messages:{title:{required:"Заполните данное поле"},description:{required:"Заполните данное поле"},text:{required:"Заполните данное поле"}}}),$(".edit__btn").on("click",(function(e){e.preventDefault();var t=$(this).closest("form");if(t.valid()){var a=new FormData(t.get(0));a.set("text",tinymce.get("text").getContent({format:"Document"})),a.set("lang",t.find('input[name="lang"]').is(":checked")?"on":"off"),a.set("linkExternal",t.find('input[name="linkExternal"]').is(":checked")?"on":"off"),$.ajax({type:"POST",url:t.attr("data-url"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:a,cache:!1,contentType:!1,processData:!1,beforeSend:function(){r.hide().show("#loader__popup")},success:function(e){alert(JSON.parse(e).msg)},error:function(){alert("Ошибка при отправке формы.")},complete:function(){r.hide("#loader__popup")}})}})),$(".add__btn").on("click",(function(e){e.preventDefault();var t=$(this).closest("form");if(t.valid()){var a=new FormData(t.get(0));a.set("text",tinymce.get("text").getContent({format:"Document"})),a.set("lang",t.find('input[name="lang"]').is(":checked")?"on":"off"),a.set("linkExternal",t.find('input[name="linkExternal"]').is(":checked")?"on":"off"),$.ajax({type:"POST",url:t.attr("data-url"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:a,cache:!1,contentType:!1,processData:!1,beforeSend:function(){r.hide().show("#loader__popup")},success:function(e){alert(JSON.parse(e).msg)},error:function(){alert("Ошибка при отправке формы.")},complete:function(){r.hide("#loader__popup")}})}})),$(".login__btn").on("click",(function(e){e.preventDefault();var t=$(this).closest("form");if(t.valid()){var a=new FormData(t.get(0));$.ajax({type:"POST",url:t.attr("data-url"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:a,cache:!1,contentType:!1,processData:!1,beforeSend:function(){r.hide().show("#loader__popup")},success:function(){void 0===t.attr("redirect-on-submit")?alert("Форма была отправлена."):window.location.href="/home"},error:function(){alert("Ошибка при отправке формы.")},complete:function(){r.hide("#loader__popup")}})}})),$(".form__field_file").on("change",(function(){var e=$(this).closest(".form__block");if(e.find(".form__field_label").html(this.files.length?this.files[0].name:"Выберите файл"),e.find(".form__media.active").removeClass("active"),this.files[0].type.startsWith("video")){var t=e.find(".form-video");t.attr("src",window.URL.createObjectURL(this.files[0])),t.on("loadeddata",(function(){window.URL.revokeObjectURL(t.attr("src")),t.addClass("active")}))}else if(this.files[0].type.startsWith("image")){var a=e.find(".form-img");a.attr("src",window.URL.createObjectURL(this.files[0])),a.on("load",(function(){window.URL.revokeObjectURL(a.attr("src")),a.addClass("active")}))}else alert("Формат файла не поддерживается. Текущий формат файла: ".concat(this.files[0].type))})),$(".form__checkbox-label").on("click",(function(){$(this).toggleClass("form__checkbox-label_active")}))}))},5760:()=>{$(document).ready((function(){$(".logout").on("click",(function(e){e.preventDefault(),$.ajax({type:"POST",url:"/logout",datatype:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(){window.location.href="/home"},error:function(e){alert("Произошла ошибка: ".concat(e))}})}))}))},7831:()=>{$(document).ready((function(){$(".project-delete").on("click",(function(e){e.preventDefault();var t=Number($(this).attr("data-project-id"));$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/admin/projects/delete",method:"POST",dataType:"json",data:{projectID:t},success:function(){location.reload()},error:function(){alert("Произошла ошибка при удалении записи.")}})}))}))},1209:()=>{$(document).ready((function(){var e=$(".admin__table-language"),t=$(e.attr("data-target")),a=e.attr("data-target-item"),n=t.find(".".concat(a)),o=e.find(".admin__table-language-el_active").attr("data-value-language");"*"===o?n.each((function(){$(this).removeClass("".concat(a,"_disabled"))})):n.each((function(){$(this).find(".admin__table-language-content").html().trim()!==o?$(this).addClass("".concat(a,"_disabled")):$(this).removeClass("".concat(a,"_disabled"))})),$(document).on("click",".admin__table-language-el",(function(){$(".admin__table-language-el_active").removeClass("admin__table-language-el_active"),$(this).addClass("admin__table-language-el_active"),"*"===(o=$(this).attr("data-value-language"))?n.each((function(){$(this).removeClass("".concat(a,"_disabled"))})):n.each((function(){$(this).find(".admin__table-language-content").html().trim()!==o?$(this).addClass("".concat(a,"_disabled")):$(this).removeClass("".concat(a,"_disabled"))}))}))}))},5608:(e,t,a)=>{var n={"./_form.js":4313,"./_logout.js":5760,"./_project-edit.js":7831,"./_project-table.js":1209};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=5608}},a={};function n(e){var o=a[e];if(void 0!==o)return o.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(e=n(5608)).keys().forEach((function(t){return e(t)}))})();